{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "CloudFormation template to create a VPC named JoshVPC",
  "Parameters": {
    "Environment": {
      "Type": "String",
      "Description": "The environment for which the resources are being created (e.g., dev, test, prod)."
    },
    "Stack": {
      "Type": "String",
      "Description": "The CloudFormation stack."
    }
  },
  "Resources": {
    "MyBucket": {
      "Type": "AWS::S3::Bucket",
      "DeletionPolicy": "Retain",
      "Properties": {
        "AccessControl": "Private"
      }
    },
    "JoshVPC": {
      "Type": "AWS::EC2::VPC",
      "Properties": {
        "CidrBlock": "10.68.0.0/18",
        "EnableDnsHostnames": true,
        "InstanceTenancy": "default",
        "Tags": [
          { "Key": "Name", "Value": "JoshVPC" }
        ]
      }
    },
    "JoshPublicSubnet1": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": { "Ref": "JoshVPC" },
        "CidrBlock": "10.68.0.0/24",
        "AvailabilityZone": "eu-west-1a",
        "Tags": [
          { "Key": "Name", "Value": "JoshPublicSubnet1" }
        ]
      }
    },
    "JoshPublicSubnet2": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": { "Ref": "JoshVPC" },
        "CidrBlock": "10.68.1.0/24",
        "AvailabilityZone": "eu-west-1b",
        "Tags": [
          { "Key": "Name", "Value": "JoshPublicSubnet2" }
        ]
      }
    },
    "JoshPrivateSubnet1": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": { "Ref": "JoshVPC" },
        "CidrBlock": "10.68.2.0/24",
        "AvailabilityZone": "eu-west-1a",
        "Tags": [
          { "Key": "Name", "Value": "JoshPrivateSubnet1" }
        ]
      }
    },
    "JoshPrivateSubnet2": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": { "Ref": "JoshVPC" },
        "CidrBlock": "10.68.3.0/24",
        "AvailabilityZone": "eu-west-1b",
        "Tags": [
          { "Key": "Name", "Value": "JoshPrivateSubnet2" }
        ]
      }
    }
  }
}

