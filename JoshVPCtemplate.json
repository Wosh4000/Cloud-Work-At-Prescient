{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "CloudFormation template to create a VPC named JoshVPC",
  "Parameters": {
    "Environment": {
      "Type": "String",
      "Description": "The environment for my VPC."
    },
    "Stack": {
      "Type": "String",
      "Description": "The Stack for my VPC."
    }
  },
  "Resources": {
    "MyBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "AccessControl": "Private"
      }
    },
    "JoshVPC": {
      "Type": "AWS::EC2::VPC",
      "Properties": {
        "CidrBlock": "10.68.0.0/18",
        "EnableDnsHostnames": true,
        "InstanceTenancy": "default",
        "Tags": [
          { "Key": "Name", "Value": "JoshVPC" }
        ]
      }
    },
    "JoshPublicSubnet1": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": { "Ref": "JoshVPC" },
        "CidrBlock": "10.68.0.0/24",
        "AvailabilityZone": "eu-west-1a",
        "Tags": [
          { "Key": "Name", "Value": { "Fn::Join": [ "-", [ "JoshPublicSubnet1", { "Ref": "Environment" }, { "Ref": "Stack" } ] ] } }
        ]
      }
    },
    "JoshPublicSubnet2": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": { "Ref": "JoshVPC" },
        "CidrBlock": "10.68.1.0/24",
        "AvailabilityZone": "eu-west-1b",
        "Tags": [
          { "Key": "Name", "Value": { "Fn::Join": [ "-", [ "JoshPublicSubnet2", { "Ref": "Environment" }, { "Ref": "Stack" } ] ] } }
        ]
      }
    },
    "JoshPrivateSubnet1": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": { "Ref": "JoshVPC" },
        "CidrBlock": "10.68.2.0/24",
        "AvailabilityZone": "eu-west-1a",
        "Tags": [
          { "Key": "Name", "Value": { "Fn::Join": [ "-", [ "JoshPrivateSubnet1", { "Ref": "Environment" }, { "Ref": "Stack" } ] ] } }
        ]
      }
    },
    "JoshPrivateSubnet2": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": { "Ref": "JoshVPC" },
        "CidrBlock": "10.68.3.0/24",
        "AvailabilityZone": "eu-west-1b",
        "Tags": [
          { "Key": "Name", "Value": { "Fn::Join": [ "-", [ "JoshPrivateSubnet2", { "Ref": "Environment" }, { "Ref": "Stack" } ] ] } }
        ]
      }
    }
  }
}

